(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7882:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ev});var r=s(5155),a=s(2115),i=s(351),n=s(226),o=s(3438);let l=(0,o.PA)(e=>{let{viewModel:t}=e;async function s(){}return(0,r.jsx)("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.renderedTextBlocks.map((e,t)=>(0,r.jsx)("span",{style:{display:"inline",...e[0].characterStyle},children:e[1].map((a,i)=>(0,r.jsx)(n.P.span,{onAnimationEnd:s,initial:{opacity:0,...e[0].characterInitial},animate:{opacity:1,...e[0].characterAnimate},transition:{duration:e[0].opacityAnimationDuration,ease:"easeOut",...e[0].characterTransition},style:{display:"inline"},children:a},"".concat(t,"-").concat(i,"-").concat(a)))},t))},"typewriter-span")});class c{equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}getDistance(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)+Math.pow(this.z-e.z,2))}normalize(){let e=this.magnitude();return 0===e?new c(0,0,0):new c(this.x/e,this.y/e,this.z/e)}crossProduct(e){return new c(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}dotProduct(e){return this.x*e.x+this.y*e.y+this.z*e.z}magnitude(){return this.dotProduct(this)}constructor(e,t,s){this.x=e,this.y=t,this.z=s}}class d{triggerAsync(e){return(0,this.owner[this.ownerCallbackName])(e)}matches(e){let t=this.actionString.toLowerCase().split(" "),s=[],r=[];for(let a=0;a<t.length;a++){let i=t[a].split("|"),n=!1;for(let t of i){for(let a=0;a<e.length;a++)if(e[a].startsWith(t)){s.push(a),r.push(t),n=!0;break}if(n)break}if(!n)return null}return r}constructor(e,t,s){this.actionString=e,this.owner=t,this.ownerCallbackName=s}}class h{constructor(e,t,s){this.width=e,this.depth=t,this.height=s}}class u{traverseNodeTree(){let e=[this];for(let t of this.connections)for(let s of t.traverseNodeTree())e.push(s);return e}addChild(e){this.connections.push(e)}removeChild(e){this.connections=this.connections.filter(t=>t!==e)}checkNode(e){let t=[this.description,...this.connections.map(e=>e.context)];return e.startParsingAsync(t.join(". "))}addCheckAction(){this.actions.push(new d("Inspect|Assess|Analyze|Probe|Scan|Investigate|Survey|Examine|Check|Explore|Look",this,this.checkNode.name))}removeAction(e){this.actions=this.actions.filter(t=>t!==e)}constructor(e,t,s){this.connections=[],this.actions=[],this.color="#FFFFFF",this.coordinates=new c(0,0,0),this.dimensions=new h(1,1,1),this.image="",this.sounds=[],this.name=e,this.context=t,this.description=s,this.addCheckAction()}}class p extends u{moveTowards(e){return e.startParsingAsync(this.moveDescription)}addMoveToAction(){this.actions.push(new d("Walk|Jog|Run|Sprint|Dash|March|Stroll|Saunter|Amble|Trek|Hike|Wander|Strut|Mosey|Glide|Shuffle|Tiptoe|Creep|Scurry|Scuttle|Rush|Charge|Bolt|Gallop|Bound|Lumber|Trudge|Stride|Pace|Roam|Drift|Meander|Advance|Proceed|Migrate|Relocate|Travel|Sneak",this,this.checkNode.name))}constructor(e,t,s,r){super(e,t,s),this.color="#AAAAFF",this.moveDescription=r,this.addMoveToAction()}}class f extends c{setFacingDirection(e){this.facingDirection=e.normalize();let t=new c(0,1,0).crossProduct(this.facingDirection).normalize();t=t.normalize();let s=this.facingDirection.crossProduct(t).normalize();this.basisCoordinateSystem[0]=this.facingDirection,this.basisCoordinateSystem[1]=t,this.basisCoordinateSystem[2]=s}getDirection(e){let t=e.x-this.x,s=e.y-this.y,r=e.z-this.z,a=this.basisCoordinateSystem[1].x*t+this.basisCoordinateSystem[1].y*s+this.basisCoordinateSystem[1].z*r;return new c(a,this.basisCoordinateSystem[2].x*t+this.basisCoordinateSystem[2].y*s+this.basisCoordinateSystem[2].z*r,this.basisCoordinateSystem[0].x*t+this.basisCoordinateSystem[0].y*s+this.basisCoordinateSystem[0].z*r).normalize()}getDirectionExpression(e){let t=[],s=e.x,r=e.z;return s>0?t.push("to the right"):s<0&&t.push("to the left"),r>0?t.push("front"):r<0&&t.push("behind"),e.y>0?t.push("above"):e.y<0&&t.push("below"),t.join(", ")}constructor(e,t,s){super(e,t,s),this.x=e,this.y=t,this.z=s,this.basisCoordinateSystem=[new c(0,0,1),new c(1,0,0),new c(0,1,0)],this.setFacingDirection(new c(0,0,1))}}class m extends u{markNodesInText(e){for(let t of[this,this.player.location,...this.player.location.connections])e=e.replace(RegExp("(".concat(t.name.toLowerCase(),")"),"g"),"[color;".concat(t.color,";$1]"));return e}constructor(e,t,s,r){super(e,t,s),this.color="#FFFFAA",this.player=r}}let x=new(s(9087)).EventEmitter;class g{getCoordinates(){return this.coordinates}modifyCoordinates(e){e(this.coordinates),x.emit("playerMoved",this.coordinates)}constructor(e,t,s){this.name=e,this.location=t,this.coordinates=s}}class v extends m{constructor(){super("Demo","A short demo.","This is a [color;orange;demo] story. Please take your time getting adjusted to the way these games play.",new g("Hans",new p("Room","You see a dark room.","You see a dark room. Horrible screams can be heard from inside.","You walk into the room.",new c(0,0,0)),new f(0,0,0)))}}async function y(e){await new Promise(t=>setTimeout(t,e))}let b={color:w,speed:k,size:S,glow:j,pause:A,sound:z,voice:N,backgroundcolor:C,screenshake:P,nowait:function(e,t){e.startParsingAsync(t[0])}};async function w(e,t){let s=t[0],r=t[1];e.getProps().characterInitial.color="#FFFFFF",e.getProps().characterAnimate.color=s,e.getProps().characterTransition.color={duration:.3,ease:"easeIn"},await e.startParsingAsync(r)}async function j(e,t){let s=t[0];e.getProps().characterInitial.textShadow="0em 0em 0em",e.getProps().characterAnimate.textShadow="0em 0em 0.5em",console.log("glowing: "+s),await e.startParsingAsync(s)}async function k(e,t){let s=parseInt(t[0]),r=t[1];e.getProps().typeSpeed=s,await e.startParsingAsync(r)}async function S(e,t){let s=t[0],r=t[1];e.getProps().characterStyle.fontSize=s,await e.startParsingAsync(r)}async function N(e,t){let s=parseInt(t[0]),r=parseInt(t[1]),a=t[2],i=[];for(let e=0;e<5;e++)i.push(r/(100*(e+1)));e.getProps().pitch=s,e.getProps().volumes=i,await e.startParsingAsync(a)}async function A(e,t){let s=parseInt(t[0]);await y(s)}async function z(e,t){let s=t[0],r=parseInt(t[1]),a=new Audio(s);if(a.volume=r/100,a.play(),3==t.length){let s=new Promise(e=>a.onended=()=>e());await e.startParsingAsync(t[2]),await s}}async function C(e,t){let s=parseInt(t[1]),r=t[0];document.body.style.transition="background-color ".concat(s,"ms"),document.body.style.backgroundColor=r,await y(s)}async function P(e,t){let s=parseInt(t[0]),r=parseInt(t[1]),a=parseInt(t[2]),i=document.body,n=i.style.transform;for(let e=0;e<r;e++){let e=Math.random()*s-s/2,t=Math.random()*s-s/2;i.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),await y(a)}i.style.transform=n}var F=s(9543);let E=null;class T{changeFrequency(e){for(let t=0;t<this.overtones.length;t++)this.overtones[t][0].frequency.value=e*(t+1)}changeVolume(e){for(let t=0;t<this.overtones.length;t++)this.overtones[t][1].gain.value=e*this.toneVolumes[t]}start(){if(this.isStopped){null==E&&(E=new window.AudioContext);for(let e=0;e<this.toneVolumes.length;e++){let t=E.createOscillator();t.type="sine",t.frequency.value=this.fundamentalFrequency*e,t.start();let s=E.createGain();s.gain.value=this.toneVolumes[e],s.connect(E.destination),t.connect(s),this.overtones.push([t,s])}this.isStopped=!1}}stop(){if(!this.isStopped){for(let e=this.overtones.length-1;e>=0;e--){let[t,s]=this.overtones[e];t.stop(),t.disconnect(s),s.disconnect(E.destination),this.overtones.pop()}this.isStopped=!0}}voiceCharacter(e){let t=e.toLowerCase();if(/[a-z0-9]/.test(t)){this.start();let e=1-(t.charCodeAt(0)%10+1)/100;/[aeiou]/.test(t)?(this.changeVolume(1),this.changeFrequency(this.fundamentalFrequency*e*({a:1.3,e:1.2,i:1.4,o:1.1,u:1.3})[t])):(this.changeVolume(.9),this.changeFrequency(this.fundamentalFrequency*e))}else" "!=t&&this.stop()}constructor(e,t){this.overtones=[],this.toneVolumes=[],this.fundamentalFrequency=180,this.isStopped=!1,this.overtones=[],this.fundamentalFrequency=e,this.toneVolumes=t,this.isStopped=!0}}class M{getProps(){return this.propsStack[this.propsStack.length-1]}async startParsingAsync(e){e=this.replaceMacros(this.extractMacros(e)),1!=this.propsStack.length||(this.isBusy=!0,null!=this.story&&(e=this.story.markNodesInText(e)),!this.lastCharacter||/^\s/.test(e)||/\s$/.test(this.lastCharacter)||(e=" "+e));let t="",s=0;for(let r of e)if("["==r&&(0==s&&t&&(await this.typeAsync(t),t=""),s++),t+=r,"]"==r){if(--s<0)throw Error("Mismatched brackets < 0");0==s&&(await this.handleCommandAsync(t),t="")}if(0!=s)throw Error("Mismatched brackets > 0");await this.typeAsync(t),1==this.propsStack.length&&(this.isBusy=!1)}extractMacros(e){let t=/\$(\w+)\s*=\s*(.+)$/gm;for(let s of e.matchAll(t))this.macros.set(s[1],s[2]);return e=e.replaceAll(t,"[DELETE]").replaceAll(/\[DELETE\](?:\r\n|\r|\n)/g,"")}async typeAsync(e){let t=this.getProps(),s=this.renderedTextBlocks.push([t,[]])-1,r=t.volumes.length>0?new T(t.pitch,t.volumes):null;for(let a of e){this.renderedTextBlocks[s][1].push(a),this.lastCharacter=a;let e=[".","!","?"].includes(a),i=[",",";",":"].includes(a),n=t.typeSpeed;e&&(n=25*t.typeSpeed),i&&(n=10*t.typeSpeed),null==r||r.voiceCharacter(a),await y(n)}null==r||r.stop()}replaceMacros(e){for(let[t,s]of this.macros)e=e.replaceAll("${".concat(t,"}"),s);return e}async handleCommandAsync(e){let t=e.slice(1,-1),s=[],r="",a=0;for(let e of t)"["==e?a++:"]"==e&&a--,";"==e&&0==a?(s.push(r),r=""):r+=e;if((r||t.endsWith(";"))&&s.push(r),s[0]in b){this.startNesting();try{let e=b[s[0]](this,s.slice(1));e instanceof Promise&&await e}finally{this.endNesting()}}else throw Error("Unknown command: ".concat(s[0]))}startNesting(){let e=JSON.parse(JSON.stringify(this.getProps()));this.propsStack.push(e)}endNesting(){if(this.propsStack.pop(),0==this.propsStack.length)throw Error("Ended nesting more often than starting it.")}constructor(e){this.story=null,this.renderedTextBlocks=[],this.isBusy=!1,this.propsStack=[],this.macros=new Map,this.lastCharacter="",(0,F.l_)(this),this.propsStack.push(e)}}var D=s(2596),_=s(9688);function I(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,_.QP)((0,D.$)(t))}function q(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:I("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function R(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:I("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function B(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:I("leading-none font-semibold",t),...s})}function L(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:I("px-6",t),...s})}function V(e){let{className:t,type:s,...a}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:I("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var W=s(9708);let O=(0,s(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Y(e){let{className:t,variant:s,size:a,asChild:i=!1,...n}=e,o=i?W.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:I(O({variant:s,size:a,className:t})),...n})}var $=s(7489);function G(e){let{className:t,orientation:s="horizontal",decorative:a=!0,...i}=e;return(0,r.jsx)($.b,{"data-slot":"separator-root",decorative:a,orientation:s,className:I("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var H=s(218);function Z(e){let{...t}=e;return(0,r.jsx)(H.bL,{"data-slot":"context-menu",...t})}function J(e){let{...t}=e;return(0,r.jsx)(H.l9,{"data-slot":"context-menu-trigger",...t})}function U(e){let{className:t,...s}=e;return(0,r.jsx)(H.ZL,{children:(0,r.jsx)(H.UC,{"data-slot":"context-menu-content",className:I("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function X(e){let{className:t,inset:s,variant:a="default",...i}=e;return(0,r.jsx)(H.q7,{"data-slot":"context-menu-item","data-inset":s,"data-variant":a,className:I("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i})}var K=s(968);function Q(e){let{className:t,...s}=e;return(0,r.jsx)(K.b,{"data-slot":"label",className:I("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}let ee=(0,o.PA)(e=>{let{viewModel:t}=e;return(0,r.jsxs)(Z,{children:[(0,r.jsx)(J,{children:t.image?(0,r.jsx)("img",{src:t.image,alt:"Preview",className:"w-full h-full"}):(0,r.jsx)("div",{className:"w-full h-full bg-[#ffffff10] border-4 border-black rounded-lg",children:(0,r.jsx)("div",{className:"text-center bg-[#00000080] p-2",style:{color:t.color},children:t.name})})}),(0,r.jsxs)(U,{children:[(0,r.jsxs)(X,{children:["Add child object to ",t.name]}),(0,r.jsxs)(X,{children:["Add child location to ",t.name]})]})]})}),et=(0,o.PA)(e=>{let{rootNode:t}=e,[s,n]=(0,a.useState)({x:0,y:0}),[o,l]=(0,a.useState)(1);return(0,r.jsxs)("div",{className:"w-full h-full overflow-hidden bg-[#ffffff10] relative rounded-lg",onWheel:e=>{l(t=>Math.max(.1,t+(e.deltaY>0?-.1:.1)))},onMouseMove:e=>{4===e.buttons&&n(t=>({x:t.x+e.movementX,y:t.y+e.movementY}))},children:[(0,r.jsxs)(Z,{children:[(0,r.jsx)(J,{children:(0,r.jsx)("div",{className:"w-full h-full relative",style:{transform:"translate(".concat(s.x,"px, ").concat(s.y,"px) scale(").concat(o,")"),transformOrigin:"center"},children:t.traverseNodeTree().map((e,t)=>(0,r.jsx)("div",{className:"absolute",style:{left:100*e.coordinates.x,top:100*e.coordinates.y,width:100*e.dimensions.width,height:100*e.dimensions.depth},children:(0,r.jsx)(ee,{viewModel:e},t)},t))})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(X,{children:"Add object"}),(0,r.jsx)(X,{children:"Add location"})]})]}),(0,r.jsx)("div",{className:"absolute top-0 left-0 p-2",children:(0,r.jsxs)(Y,{onClick:()=>{l(1),n({x:0,y:0})},children:[(0,r.jsx)(i.SE2,{}),"Reset"]})}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 p-2 bg-[#00000080] rounded-tr-lg",children:[(0,r.jsx)(Q,{children:"Position:"}),(0,r.jsxs)(Q,{children:["Scale: ",o.toFixed(2),"x"]})]}),(0,r.jsx)("div",{className:"absolute bottom-0 p-2 right-1/2 border-t-2 flex justify-center",style:{width:100},children:(0,r.jsxs)(Q,{children:[(1/o).toFixed(2),"m"]})})]})});var es=s(704);function er(e){let{className:t,...s}=e;return(0,r.jsx)(es.bL,{"data-slot":"tabs",className:I("flex flex-col gap-2",t),...s})}function ea(e){let{className:t,...s}=e;return(0,r.jsx)(es.B8,{"data-slot":"tabs-list",className:I("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function ei(e){let{className:t,...s}=e;return(0,r.jsx)(es.l9,{"data-slot":"tabs-trigger",className:I("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/50 inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function en(e){let{className:t,...s}=e;return(0,r.jsx)(es.UC,{"data-slot":"tabs-content",className:I("flex-1 outline-none",t),...s})}let eo=(0,o.PA)(e=>{let{viewModel:t}=e;return(0,r.jsxs)(er,{defaultValue:"details",className:"h-full",children:[(0,r.jsxs)(ea,{className:"w-full",children:[(0,r.jsx)(ei,{value:"details",children:"Details"}),(0,r.jsx)(ei,{value:"attributes",children:"Attributes"}),(0,r.jsx)(ei,{value:"events",children:"Events"}),(0,r.jsx)(ei,{value:"sounds",children:"Sounds"})]}),(0,r.jsx)(en,{value:"details",className:"overflow-auto",children:(0,r.jsx)(q,{children:(0,r.jsxs)(L,{className:"space-y-4",children:[(0,r.jsx)(Q,{children:"Name"}),(0,r.jsx)(V,{placeholder:"Table...",value:t.name}),(0,r.jsx)(Q,{children:"Description"}),(0,r.jsx)(V,{placeholder:"A wooden table...",value:t.description}),(0,r.jsx)(Q,{children:"Dimensions (m)"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)(V,{type:"number",placeholder:"Width"}),(0,r.jsx)(V,{type:"number",placeholder:"Depth"}),(0,r.jsx)(V,{type:"number",placeholder:"Height"})]}),(0,r.jsx)(Q,{children:"Location"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)(V,{type:"number",placeholder:"X"}),(0,r.jsx)(V,{type:"number",placeholder:"Y"}),(0,r.jsx)(V,{type:"number",placeholder:"Z"})]})]})})})]})});var el=s(3796),ec=s(9730);function ed(e){let{className:t,...s}=e;return(0,r.jsx)(ec.YZ,{"data-slot":"resizable-panel-group",className:I("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})}function eh(e){let{...t}=e;return(0,r.jsx)(ec.Zk,{"data-slot":"resizable-panel",...t})}function eu(e){let{withHandle:t,className:s,...a}=e;return(0,r.jsx)(ec.TW,{"data-slot":"resizable-handle",className:I("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),...a,children:t&&(0,r.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:(0,r.jsx)(el.A,{className:"size-2.5"})})})}class ep extends u{constructor(...e){super(...e),this.color="#AAFFFF"}}function ef(){let e=new ep("Table","","A wooden table");return e.coordinates.x=5,e.coordinates.y=5,e.addChild(new ep("Chair","","A wooden chair")),(0,r.jsxs)(ed,{direction:"horizontal",className:"rounded-lg border",children:[(0,r.jsx)(eh,{defaultSize:100,children:(0,r.jsx)("div",{className:"p-4 h-full",children:(0,r.jsx)(et,{rootNode:e})})}),(0,r.jsx)(eu,{}),(0,r.jsx)(eh,{defaultSize:30,children:(0,r.jsx)("div",{className:"p-4 h-full",children:(0,r.jsx)(eo,{viewModel:e})})})]})}var em=function(e){return e[e.Story=0]="Story",e[e.Editor=1]="Editor",e}(em||{});function ex(){let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(0);(0,a.useRef)(null);let o=(0,a.useRef)(null),c=(0,a.useRef)(!1),d=(0,a.useRef)(new v),h=(0,a.useRef)(new M({opacityAnimationDuration:.3,typeSpeed:50,pitch:0,volumes:[],characterStyle:{fontSize:"20px",color:"#FFFFFF"},characterInitial:{},characterAnimate:{},characterTransition:{}}));async function u(){t(""),"start"==e&&(h.current.story=d.current,await h.current.startParsingAsync("[voice;220;50;This is a sentence test. How long should pauses be? Maybe this long? What about commas, like this one, is that okay?]")),o.current.focus()}return(0,a.useEffect)(()=>{c.current||(c.current=!0,h.current.startParsingAsync("Enter [color;orange;start] to start the story."),o.current.focus())},[h]),(0,r.jsxs)("div",{className:"grid grid-rows-[1fr_auto] gap-4 p-8 h-full w-full",children:[(0,r.jsxs)(q,{className:"bg-[#ffffff10] h-full overflow-auto",children:[(0,r.jsxs)(R,{children:[(0,r.jsx)(B,{className:"pb-2",children:(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] items-center",children:[(0,r.jsx)("div",{className:"flex justify-center w-full text-yellow-500",children:"Demo story"}),(0,r.jsx)(Y,{onClick:()=>n((s+1)%2),variant:"outline",children:0===s?(0,r.jsx)(i.SG1,{}):(0,r.jsx)(i.aze,{})})]})}),(0,r.jsx)(G,{})]}),(0,r.jsxs)(L,{className:"h-0 flex-grow overflow-auto",children:[0===s&&(0,r.jsx)(l,{viewModel:h.current}),1===s&&(0,r.jsx)(ef,{})]})]}),0===s&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(V,{className:"pr-12",ref:o,type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"What do you do?",onKeyDown:e=>{"Enter"===e.key&&u()}}),(0,r.jsx)(Y,{onClick:u,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-0 bg-transparent text-gray-500 hover:bg-transparent",children:(0,r.jsx)(i.kGk,{})})]})]})}var eg=s(1362);function ev(){let{setTheme:e}=(0,eg.useTheme)();return e("dark"),(0,r.jsx)("div",{className:"w-screen h-100dvh",children:(0,r.jsx)(ex,{})})}},8099:(e,t,s)=>{Promise.resolve().then(s.bind(s,7882))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,866,116,441,684,358],()=>t(8099)),_N_E=e.O()}]);